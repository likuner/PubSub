!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PubSub=t():e.PubSub=t()}(this,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.events=new Map,this.onceEvents=new Map}static getInstance(){return n.instance||(n.instance=new n),n.instance}on(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}off(e,t){const n=this.events.get(e);(null==n?void 0:n.length)&&n.splice(0,n.length,...n.filter((e=>e!==t)));const s=this.onceEvents.get(e);(null==s?void 0:s.length)&&s.splice(0,s.length,...s.filter((e=>e!==t)))}once(e,t){this.onceEvents.has(e)||this.onceEvents.set(e,[]),this.onceEvents.get(e).push(t)}emit(e,...t){Promise.resolve().then((()=>{const n=this.events.get(e)||[],s=this.onceEvents.get(e)||[],i=[...n,...s];if(i.length)for(let e=0,n=i.length;e<n;e++)i[e].apply(this,t);s.length&&s.splice(0)}))}clear(){this.events.clear(),this.onceEvents.clear()}}t.default=n,n.instance=null})(),e})()));