/*!
 * @likun./pubsub
 * version: 1.0.1
 * 2022/12/29 17:40:11
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pubsubLib=t():e.pubsubLib=t()}(this,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.PubSub=void 0;class s{constructor(){this.events=new Map,this.onceEvents=new Map}static getInstance(){return s.instance||(s.instance=new s),s.instance}on(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}off(e,t){const s=this.events.get(e);(null==s?void 0:s.length)&&s.splice(0,s.length,...s.filter((e=>e!==t)));const n=this.onceEvents.get(e);(null==n?void 0:n.length)&&n.splice(0,n.length,...n.filter((e=>e!==t)))}once(e,t){this.onceEvents.has(e)||this.onceEvents.set(e,[]),this.onceEvents.get(e).push(t)}emit(e,...t){Promise.resolve().then((()=>{const s=this.events.get(e)||[],n=this.onceEvents.get(e)||[],i=[...s,...n];if(i.length)for(let e=0,s=i.length;e<s;e++)i[e].apply(this,t);n.length&&n.splice(0)}))}clear(){this.events.clear(),this.onceEvents.clear()}}t.PubSub=s,s.instance=null})(),e})()));